{% comment %}
Arguments:
    - category - every word is capitalized because it is also used in javascript
    - post_count
    - posts
    
Example:
    {% assign section_posts = site.categories['criminality'] %}
    {% include section_slideshow.html category="Criminality" post_count=section_posts.size posts=section_posts %}
{% assign posts = "" | split: "" %}
{% endcomment %}

{% assign posts = include.posts %}

{% assign post_count = include.post_count %}
{% if post_count > 7 %}
    {% assign post_count = 7 %}
{% endif %}

{% comment %}
{% if include.category == 'Headline' %}
    {% for post in include.posts %}
        {% assign posts = posts | push: post %}
        {% assign post_count = post_count | plus: 1 %}
        {% if post_count == 7 %}
            {% break %}
        {% endif %}
    {% endfor %}
{% else %}
    {% for post in include.posts %}
        {% if post.categories contains 'top' %}
            {% assign posts = posts | push: post %}
            {% assign post_count = post_count | plus: 1 %}
            {% if post_count == 7 %}
                {% break %}
            {% endif %}
        {% endif %}
    {% endfor %}
{% endif %}
{% endcomment %}

<div class="block block_default_fonts">
    <h1>{{ include.category }}</h1>
    <div class="links headline_links">
        {% for i in (1..post_count) %}
        <span class="{{ include.category | replace: ' ', '_' | downcase }}_dot slideshow_dot" onclick="current{{ include.category | remove: ' ' }}Slide({{ i | minus: 1 }})"></span>
        {% endfor %}
    </div>
    <div class="entries">
        {% for post in posts %}
        <div class="entry {{ include.category | replace: ' ', '_' | downcase }}_news_entry">
            <h2><a href="{{ post.url }}.html">{{ post.title }}</a></h2>
            <p class="date">{{ post.date | date: site.data.format.date_only }}</p>
            <p class="excerpt">
                {{ post.excerpt }}{% if post.video.source %} <i class="fa fa-video-camera" aria-hidden="true"></i>{% endif %}
            </p>
        </div>
        {% else %}
        <p class="no_entries">There are no posts for this section.</p>
        {% endfor %}
    </div>
</div>
